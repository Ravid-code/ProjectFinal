<div class="container py-5">
  <h2 class="mb-4 text-center">ðŸ›’ My Shopping Cart</h2>

@for( item of cartService.GetCartItems(); track item.id){
  <div class="card cart-card p-3">
    <div class="row align-items-center">
      <div class="col-md-2 text-center">
       <input type="checkbox" [(ngModel)]="item.is_selected" (change)="updateTotal()">
        <img [src]="item.image" class="cart-img" alt="{{item.title}}" >
      </div>
      <div class="col-md-6">
        <h5 class="mb-1">{{item.title}}</h5>
        <div class="qty">
          <button  (click)="item.qty > 1 && cartService.UpdateQty(item, item.qty - 1) ;updateTotal()" >-</button>
          <p class="mb-0 text-muted">Quantity:{{item.qty}}</p>
          <button (click)="cartService.UpdateQty(item, item.qty + 1) ;updateTotal()" >+</button>
        </div>
      </div>
      <div class="col-md-2 text-right">
        <h6>${{ item.price * item.qty  | currency }}</h6>
      </div>
      <div class="col-md-2 text-right">
        <span class="remove-btn"  (click)="cartService.RemoveFromCart(item.id)">Remove</span>
      </div>
    </div>
  </div>
}

  <!-- Total Summary -->
  <div class="total-box mt-4 text-right">
    Total: <span class="text-primary">${{ cartService. getTotalSelected()| currency }}</span>
  </div>
  <button class="total-box text-right" (click)="openInvoice()">Payment</button>
</div>
<!-- Invoice Popup -->
<div class="invoice-popup" [class.show]="showInvoice">
  <div class="invoice-content">
    <h2>Invoice</h2>
    <div *ngFor="let item of selectedItems">
      <div class="invoice-item">
        <span>{{ item.title }}</span>
        <span>Qty: {{ item.qty }}</span>
        <span>Price: ${{ item.price }}</span>
        <span>Total: ${{ item.price * item.qty }}</span>
      </div>
    </div>
    <h3>Grand Total: ${{ invoiceTotal }}</h3>
    <button (click)="closeInvoice()">Close</button>
    <button (click)="closeInvoice()">Payment</button>
  </div>
</div>